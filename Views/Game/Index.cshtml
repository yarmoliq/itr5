@{
    ViewData["Title"] = "Game";
}

<style>
    td {
    border: 1px solid black;
    height: 200px;
    width: 200px;
    }
</style>

<table id="tictactoe-table">
    <tr>
        <td id="cell_1"></td>
        <td id="cell_2"></td>
        <td id="cell_3"></td>
    </tr>
    <tr>
        <td id="cell_4"></td>
        <td id="cell_5"></td>
        <td id="cell_6"></td>
    </tr>
    <tr>
        <td id="cell_7"></td>
        <td id="cell_8"></td>
        <td id="cell_9"></td>
    </tr>
</table>

<button onclick="printOC()">check connection</button>

<script src="~/js/signalr/dist/browser/signalr.js"></script>


<script>

    let connection = new signalR.HubConnectionBuilder().withUrl("/gamehub").build();
    let myConnectionId;
    let opponentConnectionId;

    connection.start().catch(err=>{
        alert("couldnt connect");
    })
    .then( function()
    {
        connection.invoke("NewGame").then(()=>{});
        connection.invoke("GetConnectionId").then((data)=>{
            myConnectionId = data;
            console.log("MY ID: " + myConnectionId);
        })
    })

    connection.on("AssignOpponent", (ocid)=>{
        console.log("Opponent assigned = " + ocid);
        opponentConnectionId = ocid;
    })

    let printOC = function(){
        console.log("PRINTING OPPONENTS CONNECTION ID: " + opponentConnectionId);
    }

    connection.on("RedirectToMainScreen",()=>{
        window.location.href = "/Home/Index";
    })    
</script>